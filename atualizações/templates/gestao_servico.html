{% extends "layout.html"%}

{% block estilo %}
<link rel="stylesheet" href={{url_for("static", filename="gestao_servico.css" )}}>
{% endblock %}

{% block corpo %}

<body>



    <div style="display: flex; flex-direction: column; align-items: center;">
        <h1>Gerenciamento de Serviços</h1>

        <div class="container">
            <h2>Adicione mais Serviços</h2>
            <form action="/gestao" method="POST" class="formServico">
                <div class="campo">
                    <label for="servico">Serviço:</label>
                    <input type="text" id="nome" name="Servico" required><br>
                    <label for="descricao">Decrição:</label>
                    <input type="text" id="descricao" name="Descrição" required><br>
                    <button type="submit">adicionar</button>
                </div>
            </form>
            <hr>
            <h2> Atualizar Serviços </h2>
            <form action="/gestao/atualizar" method="POST" class="formServico">
                <div class="campo">
                    <label for="id">ID do Serviço:</label>
                    <input type="id" id="id" name="id" required><br>
                    <label for="descricao">Decrição:</label>
                    <input type="text" id="descricao" name="Descricao" required><br>
                    <label for="servico">Serviço:</label>
                    <input type="text" id="nome" name="Servico" required><br>
                    <button type="submit">Atualizar</button>
                </div>
            </form>
            <hr>
            <h2> Deletar Serviços </h2>
            <form action="gestao/atualizar/deletar" method="POST" class="formServico">
                <div class="campo">
                    <label for="id">ID do Serviço:</label>
                    <input type="id" id="id" name="id" required><br>
                    <button type="submit">Deletar</button>
                </div>
            </form>
            <br>
        </div>

        <table id="myTable">
            <th class="thcabeca">
            <td>Id</td>
            <td>Descrição</td>
            <td>Serviço</td>
            </th>

            {% for servico in listaServicos %}
            <tr>
                <td>{{servico[0]}}</td>
                <td>{{servico[1]}}</td>
                <td>{{servico[2]}}</td>
            </tr>
            {% endfor %}
        </table>
    </div>


</body>
{% endblock %}

{% block js %}
<script> // Funções para gerenciar serviços
    // Get the table
    const table = document.getElementById('myTable');

    // Get all th elements
    const thElements = table.getElementsByTagName('th');

    // Loop through th elements and remove if empty
    for (let i = thElements.length - 1; i >= 0; i--) {
        if (thElements[i].textContent.trim() === '') {
            thElements[i].remove();
        }
    }  
</script>
{% endblock %}