import mysql.connector

def iniciaconexao():
    conexaoBanco = mysql.connectorn.connect(
        host="localhost",
        user="root",
        password="WAGUINHO451",
        database="Agenda"
    )

    return conexaoBanco

def creatServico(nomeServico, hora, nome):
    conexao = mysql.connector.BD.iniciaConexao()
    cursor = conexao.cursor()
    comando = "INSERT INTO servico (nomeServico,hora,nome) VALUES(%s, %s, %s)"
    valores = [nomeServico,hora,nome]
    cursor.execute(comando, valores)
    conexao.commit() # edita o banco de dados
    #resultado= cursor.fetchtall() #ler o banco de dados
    print("Operação concluida!")
    cursor.close()
    conexao.close()

def deleteServico(id):    
    conexao = mysql.connector.BD.iniciaConexao()
    cursor = conexao.cursor()
    comando = "DELETE FROM servico WHERE id = %i"
    valores = [id]
    cursor.execute(comando, valores)
    conexao.commit() # edita o banco de dados
    #resultado= cursor.fetchtall() #ler o banco de dados
    print("Operação concluida!")
    cursor.close()
    conexao.close()

def updateServico(nomeServico,hora,nome):
    conexao = mysql.connector.BD.iniciaConexao()
    cursor = conexao.cursor()
    comando = "UPDATE servico SET nomeServico = %s, hora = %s, nome = %s WHERE id= %i"
    valores = [nomeServico,hora,nome, id]
    cursor.execute(comando, valores)
    conexao.commit() # edita o banco de dados
    #resultado= cursor.fetchtall() #ler o banco de dados
    print("Operação concluida!")
    cursor.close()
    conexao.close()

def readServico():
    conexao = mysql.connector.BD.IniciaConexao()
    cursor = conexao.cursor()
    comando = "SELECT * FROM servico;"
    cursor.execute(comando)
    conexao.commit() # edita o banco de dados
    #resultado= cursor.fetchtall() #ler o banco de dados
    print("Serviço")
    cursor.close()
    conexao.close()

















from flask import Flask, render_template, redirect, request, session
import model.gestaoBD
import model.servicoBD as user
import model.usuarioBD

app = Flask(__name__)
app.secret_key = "WagnerELucas"

#Inicio
@app.route("/")
def hello_world():
    return render_template("index.html")


#Pagina servicos --- Get
@app.get("/servico")
def servicosGet():
    servicos = user.servicosAgendamento()
    return render_template("servicos.html", listaServico = servicos)

@app.post("/servico")
def servicoPost():
    return render_template("servicos.html")

@app.get("/gestão")
def gestaoGet():
    servicos = user.servicosAgendamento()
    return render_template("gestao_servico.html")

@app.get("/gestão")
def gestaoPost():
    return render_template("gestao_servico.html")



@app.route("/servico/gestão/consultasAgendadas/sobre")
def sobre():
    return render_template("sobre.html")

@app.route("/servico/gestão/consultasAgendadas/sobre/contato")
def contato():
    return render_template("contato.html")

@app.route("/servico/gestão/consultasAgendadas/sobre/contato/usuario")
def usuario():
    return render_template("usuario1.0.html")

@app.get("/login")
def loginGet():
    return render_template("tela_login.html")

@app.post("/login")
def loginPost():
    email = request.form["email"]
    senha = request.form["senha"]
    usuario = model.usuarioBD.pegarUsuario(email)
    if(email == usuario[1] and senha == usuario[2]):
        session["nivel"] = usuario[3]
        session["email"] = usuario[1]
        return redirect("/")
    else:
        return redirect("/login")
    
@app.route("/logout")
def logout():
    session.clear()
    return redirect("/")

app.run(debug=True)







import mysql.connector  

def iniciaconexao():
    conexaoBanco = mysql.connectorn.connect(
        host="localhost",
        user="root",
        password="WAGUINHO451",
        database="Agenda"
    )

    return conexaoBanco


