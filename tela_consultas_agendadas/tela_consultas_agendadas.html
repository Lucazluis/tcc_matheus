<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultas Agendadas</title>
    <link rel="stylesheet" href="consultas_agendadas.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.css">
</head>
<body>
    <h1>Consultas Agendadas</h1>

    <div id="filtros">
        <label for="data">Data:</label>
        <input type="date" id="data">
        <label for="paciente">Paciente:</label>
        <input type="text" id="paciente">
        <label for="servico">Serviço:</label>
        <select id="servico">
            <option value="">Todos</option>
        </select>
        <label for="profissional">Profissional:</label>
        <select id="profissional">
            <option value="">Todos</option>
        </select>
        <button id="btn-filtrar">Filtrar</button>
    </div>

    <div id="calendario"></div>

   <!-- <table id="tabela-consultas" class="display" style="width: 100%;">
        <thead>
            <tr>
                <th>Paciente</th>
                <th>Serviço</th>
                <th>Horário</th>
                <th>Médico</th>
                <th>Ações</th>
            </tr>
        </thead>
       
    </table>
-->
    <div id="modal-consulta" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Consulta</h2>
            <form id="form-consulta">
                <input type="hidden" id="id-consulta">
                <label for="paciente">Paciente:</label>
                <input type="text" id="paciente" name="paciente" required>
                <label for="servico">Serviço:</label>
                <select id="servico" name="servico" required>
                    </select>
                <label for="data">Data:</label>
                <input type="date" id="data" name="data" required>
                <label for="hora">Hora:</label>
                <input type="time" id="hora" name="hora" required>
                <label for="profissional">Médico:</label>
                <select id="profissional" name="profissional" required>
                    </select>
                <button type="submit">Salvar</button>
            </form>
        </div>
    </div>
    <script> 
// Funções para gerenciar consultas

// Dados de exemplo (substitua por sua fonte de dados)
var consultas = [
    { id: 1, paciente: "João Silva", data: "2024-06-07", hora: "09:00", servico: "Limpeza Dental", profissional: "Dr. Almeida" },
    { id: 2, paciente: "Maria Souza", data: "2024-06-07", hora: "10:30", servico: "Obturação", profissional: "Dra. Oliveira" },
    { id: 3, paciente: "Pedro Cardoso", data: "2024-06-08", hora: "14:00", servico: "Raio-X", profissional: "Dr. Costa" },
];

// Função para carregar consultas na tabela
function carregarConsultas() {
    $("#tabela-consultas").DataTable({
        data: consultas.map(function(consulta) {
            return [
                consulta.paciente,
                consulta.servico,
                consulta.data + " " + consulta.hora,
                consulta.profissional,
                '<button onclick="editarConsulta(' + consulta.id + ')">Editar</button> ' +
                '<button onclick="confirmarConsulta(' + consulta.id + ')">Confirmar</button> ' +
                '<button onclick="cancelarConsulta(' + consulta.id + ')">Cancelar</button>'
            ];
        }),
        columns: [
            { title: "Paciente" },
            { title: "Serviço" },
            { title: "Horário" },
            { title: "Médico" },
            { title: "Ações", orderable: false }
        ],
        language: {
            "emptyTable": "Nenhuma consulta agendada.",
            "search": "Buscar:",
            "lengthMenu": "Mostrar _MENU_ entradas",
            "zeroRecords": "Nenhuma consulta encontrada para a sua pesquisa",
            "info": "Mostrando _START_ a _END_ de _TOTAL_ entradas",
            "infoEmpty": "Mostrando 0 a 0 de 0 entradas",
            "infoFiltered": "(filtrado de _MAX_ entradas)",
            "paginate": {
                "first": "Primeiro",
                "previous": "Anterior",
                "next": "Próximo",
                "last": "Último"
            }
        }
    });
}

// Função para carregar serviços no filtro
function carregarServicos() {
    var servicoSelect = $("#servico");
    servicoSelect.empty(); // Limpar opções

    consultas.forEach(function(consulta) {
        if (!servicoSelect.find('option[value="' + consulta.servico + '"]').length) {
            servicoSelect.append('<option value="' + consulta.servico + '">' + consulta.servico + '</option>');
        }
    });
}

// Função para carregar profissionais no filtro
function carregarProfissionais() {
    var profissionalSelect = $("#profissional");
    profissionalSelect.empty(); // Limpar opções

    consultas.forEach(function(consulta) {
        if (!profissionalSelect.find('option[value="' + consulta.profissional + '"]').length) {
            profissionalSelect.append('<option value="' + consulta.profissional + '">' + consulta.profissional + '</option>');
        }
    });
}

// Função para aplicar filtros
function aplicarFiltros() {
    var data = $("#data").val();
    var paciente = $("#paciente").val().toLowerCase();
    var servico = $("#servico").val();
    var profissional = $("#profissional").val();
};

    var consultasFiltradas = consultas.filter(function(consulta) {
        var dataValida = data === "" || new Date(consulta.data) >= new Date(data);
        var pacienteValido = paciente === "" || consulta.paciente.toLowerCase().includes(paciente);
        var servicoValido = servico === "" || consulta.servico === servico;
        var profissionalValido = profissional === "" || consulta.profissional === profissional;

        return dataValida && pacienteValido && servicoValido && profissionalValido;
    });

    $("#tabela-consultas").DataTable().clear().draw(); // Limpar tabela
    $("#tabela-consultas").DataTable().rows
    </script>
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.js"></script>
   <script src="script.js"></script>//
</body>
</html>